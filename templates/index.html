{% extends "base.html" %}

{% block content %}
<div class="card">
    <div class="card-header bg-primary text-white">
        <h4>üìù ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</h4>
    </div>
    <div class="card-body">
        <form method="POST" action="/submit">
            <div class="row g-3">
                <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Agent ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà -->
                <div class="col-md-6">
                    <label class="form-label">üîñ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Agent</label>
                    <select class="form-select" name="agent" required>
                        <option value="">-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Agent --</option>
                        {% for agent in agents %}
                        <option value="{{ agent.name }}">{{ agent.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="col-md-6">
                    <label class="form-label">üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</label>
                    <input type="date" class="form-control" name="date" required 
                           value="{{ datetime.now().strftime('%d-%m-%y') }}">
                </div>
                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô -->
                <div class="col-md-4">
                    <label class="form-label">üë• ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà</label>
                    <input type="number" class="form-control" name="new_members" min="0" required value="0">
                </div>
                
                <div class="col-md-4">
                    <label class="form-label">üë• ‡∏ù‡∏≤‡∏Å‡πÅ‡∏•‡πâ‡∏ß</label>
                    <input type="number" class="form-control" name="first_deposit" step="0.01" min="0" required value="0">
                </div>

                <div class="col-md-4">
                    <label class="form-label">üí≥ ‡∏ù‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏£‡∏ß‡∏°</label>
                    <input type="number" class="form-control" name="all_deposit" step="0.01" min="0" required value="0">
                </div>
                
                <div class="col-md-4">
                    <label class="form-label">üìä ‡πÅ‡∏≠‡∏Ñ‡∏ó‡∏µ‡∏ü</label>
                    <input type="number" class="form-control" name="used" min="0" required value="0">
                </div>
                <div class="col-md-4">
                    <label class="form-label">üî∫ Total THB ‡∏ä‡∏ô‡∏∞/‡πÅ‡∏û‡πâ</label>
                    <input type="number" class="form-control" name="profit_thb" step="0.01" required value="0">
                </div>
                <div class="col-md-4">
                    <label class="form-label">üî∫ Total USDT ‡∏ä‡∏ô‡∏∞/‡πÅ‡∏û‡πâ</label>
                    <input type="number" class="form-control" name="profit_usdt" step="0.01" required value="0">
                </div>
                <div class="col-md-4">
                    <label class="form-label">üü¢ DB</label>
                    <input type="number" 
                           class="form-control" 
                           name="db" 
                           step="0.01" 
                           min="0" 
                           required 
                           value="50000">
                </div>
                <div class="col-12 mt-4 border-top pt-3">
                    <h5 class="text-primary">üí∏ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ù‡∏≤‡∏Å </h5>
                    <div id="deposit-container">
                        <div class="row g-3 deposit-row mb-2">
                            <div class="col-md-4">
                                <select class="form-select bank-select" name="deposit_accounts[]">
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</option>
                                    <option value="BBL">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û (BBL)</option>
                                    <option value="KBANK">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢ (KBANK)</option>
                                    <option value="KBIZ">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢ (KBIZ)</option>
                                    <option value="KTB">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢ (KTB)</option>
                                    <option value="SCB">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå (SCB)</option>
                                    <option value="BAY">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤ (BAY)</option>
                                    <option value="TMB">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ó‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢ (TMB)</option>
                                    <option value="TBANK">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ò‡∏ô‡∏ä‡∏≤‡∏ï (TBANK)</option>
                                    <option value="KK">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ô‡∏≤‡∏Ñ‡∏¥‡∏ô (KK)</option>
                                    <option value="TISCO">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ó‡∏¥‡∏™‡πÇ‡∏Å‡πâ (TISCO)</option>
                                    <option value="CIMBT">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ã‡∏µ‡πÑ‡∏≠‡πÄ‡∏≠‡πá‡∏°‡∏ö‡∏µ‡πÑ‡∏ó‡∏¢ (CIMBT)</option>
                                    <option value="LH">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÅ‡∏•‡∏ô‡∏î‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡πÄ‡∏Æ‡πâ‡∏≤‡∏™‡πå (LH)</option>
                                    <option value="UOB">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏¢‡∏π‡πÇ‡∏≠‡∏ö‡∏µ (UOB)</option>
                                    <option value="BACC">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£ (BACC)</option>
                                    <option value="ICBC">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÑ‡∏≠‡∏ã‡∏µ‡∏ö‡∏µ‡∏ã‡∏µ (ICBC)</option>
                                    <option value="GSB">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô (GSB)</option>
                                    <option value="TRUE">‡∏ó‡∏£‡∏π‡∏°‡∏±‡∏ô‡∏ô‡∏µ‡πà‡∏ß‡∏≠‡πÄ‡∏•‡πá‡∏ï (TRUE)</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <input type="number" class="form-control" name="deposit_amounts[]" step="0.01" min="0" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" value="0">
                            </div>
                            <div class="col-md-2">
                                <button type="button" class="btn btn-danger remove-deposit-btn" disabled>
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <button type="button" id="add-deposit-btn" class="btn btn-sm btn-success mt-2">
                        <i class="fas fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ù‡∏≤‡∏Å
                    </button>
                </div>

                <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ñ‡∏≠‡∏ô -->
                <div class="col-12 mt-4 border-top pt-3">
                    <h5 class="text-danger">üìµ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ñ‡∏≠‡∏ô</h5>
                    <div id="withdrawal-container">
                        <div class="row g-3 withdrawal-row mb-2">
                            <div class="col-md-4">
                                <select class="form-select bank-select" name="withdrawal_accounts[]">
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</option>
                                    <option value="BBL">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û (BBL)</option>
                                    <option value="KBANK">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢ (KBANK)</option>
                                    <option value="KBIZ">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢ (KBIZ)</option>
                                    <option value="KTB">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢ (KTB)</option>
                                    <option value="SCB">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå (SCB)</option>
                                    <option value="BAY">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤ (BAY)</option>
                                    <option value="TMB">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ó‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢ (TMB)</option>
                                    <option value="TBANK">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ò‡∏ô‡∏ä‡∏≤‡∏ï (TBANK)</option>
                                    <option value="KK">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ô‡∏≤‡∏Ñ‡∏¥‡∏ô (KK)</option>
                                    <option value="TISCO">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ó‡∏¥‡∏™‡πÇ‡∏Å‡πâ (TISCO)</option>
                                    <option value="CIMBT">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ã‡∏µ‡πÑ‡∏≠‡πÄ‡∏≠‡πá‡∏°‡∏ö‡∏µ‡πÑ‡∏ó‡∏¢ (CIMBT)</option>
                                    <option value="LH">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÅ‡∏•‡∏ô‡∏î‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡πÄ‡∏Æ‡πâ‡∏≤‡∏™‡πå (LH)</option>
                                    <option value="UOB">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏¢‡∏π‡πÇ‡∏≠‡∏ö‡∏µ (UOB)</option>
                                    <option value="BACC">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£ (BACC)</option>
                                    <option value="ICBC">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÑ‡∏≠‡∏ã‡∏µ‡∏ö‡∏µ‡∏ã‡∏µ (ICBC)</option>
                                    <option value="GSB">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô (GSB)</option>
                                    <option value="TRUE">‡∏ó‡∏£‡∏π‡∏°‡∏±‡∏ô‡∏ô‡∏µ‡πà‡∏ß‡∏≠‡πÄ‡∏•‡πá‡∏ï (TRUE)</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <input type="number" class="form-control" name="withdrawal_amounts[]" step="0.01" min="0" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" value="0">
                            </div>
                            <div class="col-md-2">
                                <button type="button" class="btn btn-danger remove-withdrawal-btn" disabled>
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <button type="button" id="add-withdrawal-btn" class="btn btn-sm btn-success mt-2">
                        <i class="fas fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ñ‡∏≠‡∏ô
                    </button>
                </div>

                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô -->
                <div class="col-12 mt-4 border-top pt-3">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label class="form-label">‡πÄ‡∏ï‡∏¥‡∏°‡∏°‡∏∑‡∏≠</label>
                            <input type="number" class="form-control" name="mobile_deposit" step="0.01" min="0" required value="0">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">üíº ‡∏ñ‡∏≠‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°</label>
                            <input type="number" class="form-control" name="commission" step="0.01" min="0" required value="0">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">üéÅ ‡πÇ‡∏ö‡∏ô‡∏±‡∏™</label>
                            <input type="number" class="form-control" name="bonus" step="0.01" min="0" required value="0">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">üè¶ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</label>
                            <input type="number" class="form-control" name="transfer" step="0.01" required value="0">
                        </div>
                    </div>
                </div>

                <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
                <div class="col-12 mt-4">
                    <button type="submit" class="btn btn-success btn-lg w-100">
                        üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
$(document).ready(function() {
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ù‡∏≤‡∏Å
    $('#add-deposit-btn').click(function() {
        const newRow = $('.deposit-row:first').clone();
        newRow.find('input').val('0');
        newRow.find('.remove-deposit-btn').prop('disabled', false);
        $('#deposit-container').append(newRow);
    });

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ñ‡∏≠‡∏ô
    $('#add-withdrawal-btn').click(function() {
        const newRow = $('.withdrawal-row:first').clone();
        newRow.find('input').val('0');
        newRow.find('.remove-withdrawal-btn').prop('disabled', false);
        $('#withdrawal-container').append(newRow);
    });

    // ‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ù‡∏≤‡∏Å
    $(document).on('click', '.remove-deposit-btn', function() {
        if ($('.deposit-row').length > 1) {
            $(this).closest('.deposit-row').remove();
        }
    });

    // ‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ñ‡∏≠‡∏ô
    $(document).on('click', '.remove-withdrawal-btn', function() {
        if ($('.withdrawal-row').length > 1) {
            $(this).closest('.withdrawal-row').remove();
        }
    });
});
</script>
{% endblock %}